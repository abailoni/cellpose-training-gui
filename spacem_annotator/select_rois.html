
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Select Regions of Interest &#8212; SpaceM Annotator  documentation</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Annotate Regions of Interest" href="label_rois/label_rois.html" />
    <link rel="prev" title="Getting started" href="install.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">SpaceM Annotator</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="install.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Select Regions of Interest
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="label_rois/label_rois.html">
  Annotate Regions of Interest
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="training.html">
  Train cellpose
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-are-regions-of-interest">
   What are regions of interest?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-select-good-regions-of-interest">
     How to select good regions of interest
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#some-example-cases">
     Some example cases
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-images-to-the-annotation-project">
   Adding images to the annotation project
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-the-first-image">
     Adding the first image
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#browsing-images-in-the-project-and-adding-new-ones">
     Browsing images in the project and adding new ones
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#updating-image-channels">
     Updating image channels
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#selecting-regions-of-interest-in-napari">
   Selecting regions of interest in Napari
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="select-regions-of-interest">
<h1>Select Regions of Interest<a class="headerlink" href="#select-regions-of-interest" title="Permalink to this headline">¶</a></h1>
<p>After clinking on <code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">Regions</span> <span class="pre">of</span> <span class="pre">Interest</span></code> in the starting window of the annotation tool, a napari viewer will open and let you add images to the project and select regions of interest.</p>
<a class="reference internal image-reference" href="../_images/selecting_rois.jpg"><img alt="Napari interface to select ROIs" class="align-center" src="../_images/selecting_rois.jpg" style="width: 100%;" /></a>
<section id="what-are-regions-of-interest">
<h2>What are regions of interest?<a class="headerlink" href="#what-are-regions-of-interest" title="Permalink to this headline">¶</a></h2>
<p>After adding an image to the project, you will need to select one or more region of interests (rectangular boxes) that will indicate the parts of the image that you want to manually annotate and that will be used in the following to train the segmentation algorithm.</p>
<section id="how-to-select-good-regions-of-interest">
<h3>How to select good regions of interest<a class="headerlink" href="#how-to-select-good-regions-of-interest" title="Permalink to this headline">¶</a></h3>
<p>When you select a region of interest, keep in mind that <strong>you will need to manually annotate all cells inside that region of interest</strong>. Each region of interest should contain <strong>at least several dozens of cells, ideally ~100</strong>.</p>
<p>These region of interests will be used to train the segmentation algorithm, so you should <strong>select the most representative parts of your data</strong>. If there are some particularly challenging parts of your data the you would like the segmentation algorithm to properly segment, then you should also select some regions of interest from these difficult parts.</p>
</section>
<section id="some-example-cases">
<h3>Some example cases<a class="headerlink" href="#some-example-cases" title="Permalink to this headline">¶</a></h3>
<p>Here there are some possible scenarios describing how you should proceed while choosing the regions of interest:</p>
<ul class="simple">
<li><p><strong>Scenario 1</strong>: Your images/datasets present several artifacts close to the borders, but you only care to have an accurate segmentation in the central part of the image, where image quality is higher and there are no artifacts. In this case, you can select regions of interest only from the central area of your image.</p></li>
<li><p><strong>Scenario 2</strong>: Your images/datasets present several artifacts in all parts of the image, and you would like cells to be properly segmented even in parts of the image where these artifacts are present. Then, you should also include regions of interest where artifacts are present (but you should also include regions that are easier to segment)</p></li>
<li><p><strong>Scenario 3</strong>: You acquired several images that look somehow different (different acquisition method, brightness, etc). Then, you should select regions of interest across all your images/datasets.</p></li>
</ul>
</section>
</section>
<section id="adding-images-to-the-annotation-project">
<h2>Adding images to the annotation project<a class="headerlink" href="#adding-images-to-the-annotation-project" title="Permalink to this headline">¶</a></h2>
<section id="adding-the-first-image">
<h3>Adding the first image<a class="headerlink" href="#adding-the-first-image" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="../_images/add-new-image.jpg"><img alt="Add new image options" class="align-right" src="../_images/add-new-image.jpg" style="width: 250px;" /></a>
<p>On the right side of the napari viewer, select the paths of an image you want to add to the project (either insert the path manually or click on the <em>Select file</em> buttons).</p>
<p>For each image, you can add up to four channels:</p>
<ul class="simple">
<li><p><strong>Main channel</strong>: This is the main channel that will be used for segmentation (usually it is the bright-field channel)</p></li>
<li><p><strong>DAPI channel</strong>: If available, add a DAPI channel because it often improves segmentation results</p></li>
<li><p><strong>Extra channels</strong>: If you have additional channels that may be helpful for the manual annotation process, you can load them. They won’t be used by the segmentation algorithm though.</p></li>
</ul>
<p>After you select the files with the image channels, click on <em>Update Displayed Image Channels</em>. This will add the image to the project and the image channels will be loaded in napari in different colors.</p>
</section>
<section id="browsing-images-in-the-project-and-adding-new-ones">
<h3>Browsing images in the project and adding new ones<a class="headerlink" href="#browsing-images-in-the-project-and-adding-new-ones" title="Permalink to this headline">¶</a></h3>
<p>After adding the first image, you can add another image by selecting the <em>“Add new image”</em> option from the dropdown menu <em>“Shown image”</em> in the top-right corner. Alternatively, using the same menu, you can switch between the images in the project.</p>
<a class="reference internal image-reference" href="../_images/adding-new-image.jpg"><img alt="Modifying added images" class="align-center" src="../_images/adding-new-image.jpg" style="width: 100%;" /></a>
</section>
<section id="updating-image-channels">
<h3>Updating image channels<a class="headerlink" href="#updating-image-channels" title="Permalink to this headline">¶</a></h3>
<p>At any moment, you can update the channel paths of an image added to the project. Simply update the path and then click again on the <code class="docutils literal notranslate"><span class="pre">Update</span> <span class="pre">Displayed</span> <span class="pre">Image</span> <span class="pre">Channels</span></code> button.</p>
</section>
</section>
<section id="selecting-regions-of-interest-in-napari">
<h2>Selecting regions of interest in Napari<a class="headerlink" href="#selecting-regions-of-interest-in-napari" title="Permalink to this headline">¶</a></h2>
<p>Once you selected an image in your project, you will see that a new shapes layer named “<em>Regions of interest</em>” has been loaded in Napari.</p>
<p>After selecting the shape layer, you can perform the following three actions:</p>
<a class="reference internal image-reference" href="../_images/select_roi_tools.jpg"><img alt="Tools for creating ROIs" class="align-right" src="../_images/select_roi_tools.jpg" style="width: 50%;" /></a>
<ol class="arabic simple">
<li><p><strong>Move around and zoom</strong>: To move the image or zoom in/out, make sure that you select the “Lens” tool in the top-left corner toolbar in Napari. You can zoom by scrolling with your mouse/trackpad.</p></li>
<li><p><strong>Create ROIs</strong>: To create a new region of interest, select the Napari “Rectangle” tool (see button 2 in the image on the right) and then draw one or more boxes. Then you can click on the <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Regions</span> <span class="pre">of</span> <span class="pre">Interest</span></code> button on the right to immediately save the selected ROIs.</p></li>
<li><p><strong>Delete or modify ROIs</strong>: In this case, select the “Select” tool in Napari (see button 3 in the image on the right). Then you can click on a box and press &lt;backspace&gt; to delete the rectangle. Otherwise, you can drag the rectangle around or adjust the corners.</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>While you have the “rectangle” or “select” tools selected, if you want to <strong>zoom or move around in the image</strong>, you can do that by keeping the &lt;space-bar&gt; key pressed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ROIs are automatically updated and saved when you switch to another image or go back to the starting window. Due to the current implementation, updating ROIs may take some time (depending on the size of the ROI) and the Napari interface may freeze for few seconds.</p>
</div>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="install.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Getting started</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="label_rois/label_rois.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Annotate Regions of Interest</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Alberto Bailoni &lt;alberto.bailoni@embl.de&gt;.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>